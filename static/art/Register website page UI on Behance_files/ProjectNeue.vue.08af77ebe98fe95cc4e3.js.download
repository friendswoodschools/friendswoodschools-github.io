(("undefined"!=typeof global?global:self).webpackChunk_wp_vue_app=("undefined"!=typeof global?global:self).webpackChunk_wp_vue_app||[]).push([[9419],{91358:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var i=o(66201),n=o.n(i),r=o(58366),s=o.n(r)()(n());s.push([e.id,".ProjectNeue-projectWrapper-q2J{height:100%;pointer-events:none;width:100%}@media(min-width: 1025px){.ProjectNeue-projectWrapper-q2J{margin-top:-20px}}@media(max-width: 1024px){.ProjectNeue-projectWrapper-q2J #lightbox-wrap .lightbox-extra.control.close{top:60px}}.ProjectNeue-centerSpinner-LFW{margin:0 auto;top:50%}",""]),s.locals={projectWrapper:"ProjectNeue-projectWrapper-q2J",centerSpinner:"ProjectNeue-centerSpinner-LFW"};const a=s},13290:(e,t,o)=>{"use strict";o.r(t),o.d(t,{NARROW_THRESHOLD:()=>Je,default:()=>ot});var i=o(87809),n=["data-id"];var r,s,a=o(30411),c=o(4277),l=o(38930),u=o(40526),d=o(3387),p=o(98537),h=o.n(p),_=o(16296),m=o(40516),f=o(33368),v="INIT_ACTION",C="INIT_PROJECT_SOURCE_FILES",g="CLOSE_VIEWER_ACTION",E="APPRECIATE_CLICK_ACTION",S="UNAPPRECIATE_CLICK_ACTION",O="NAVIGATE_TO_PREV_PROJECT_ACTION",I="NAVIGATE_TO_NEXT_PROJECT_ACTION",A="COMMENT_ADDED_ACTION",P="COMMENT_REMOVED_ACTION",T="REMOVE_CREDIT_CLICK_ACTION",j="PULSE_POINT_CLICKED",w="PULSE_POINT_HOVERED",b="PROJECT_VIEWED_FRONTEND",R="COLLECTION_ICON_CLICKED",y="COLLECTION_MODAL_OPENED",M="COLLECTION_MODAL_CLOSED",k="COLLECTION_MODAL_SUCCESS_MESSAGE_READ",N="REPORT_PROJECT",L="REPORT_PROJECT_ASSET",D="BLOCK_USERS",B="TAKEDOWN_MODULE_IMAGE",F="RESTORE_MODULE_IMAGE",x="REMOVE_EU_IP_FLAG",$="CLEAR_CDN_MODULE_IMAGE",U="SUBMIT_FOR_MATURE_REVIEW",V="INFO_BOX_OPENED",H="INFO_BOX_CLOSED",W="TOOLS_ICON_CLICKED",Z="OPEN_IN_AERO_CLICKED",q="PROJECT_END_REACHED",G="PROJECT_MODULE_VIEWED",J="CLICK_DOWNLOAD_TOOL_ACTION",K="CLICK_OPEN_TOOL_GALLERY_ACTION",z="COMMENT_CHILD_GAINED_FOCUS_ACTION",Y="COMMENT_CHILD_LOST_FOCUS_ACTION",X="PROJECT_VIEWED_ACTION",Q="GENERATE_SIMILAR_IMAGES",ee="SUBSCRIBED_TO_PROJECT_OWNER",te="SET_PROJECT_DATA",oe="SET_OTHER_PROJECTS",ie="SET_PROJECT_TITLE_DATA",ne="SET_PROJECT_CREDITS",re="SET_APPRECIATED",se="SET_IS_FETCHING_DONE_STATUS",ae="SET_VIEWER_TOGGLE_STATUS",ce="SET_POPUP_CSS_PATH",le="SET_INLINE_STYLE",ue="SET_APPRECIATION_COUNT",de="SET_COMMENT_TOTAL",pe="SET_USER",he="SET_ADMIN_DATA",_e="SET_SHARE_CONFIG",me="SET_MATURE_REVIEW_SUBMITTED",fe="SET_COLLECTION_MODAL_VISIBILITY",ve="SET_COMMENT_CHILD_FOCUS",Ce="SET_IS_AWAITING_BLOCK",ge="SET_USERS_WERE_BLOCKED",Ee="UPDATE_PROJECT_DATA",Se="SET_BLOCK_FAILURE",Oe="SET_SOURCE_ASSET",Ie={namespaced:!0,state:function(){return{admin:null,shareConfig:null,project:{},credits:[],inlineStyle:"",title:"",popupCssPaths:[],commentCount:0,otherProjects:[],pulsePoints:{},appreciationCount:0,urls:{},isAppreciated:!1,isDoneFetching:!1,isViewerOpen:!1,isFullPage:!1,user:null,isMatureReviewSubmitted:!1,isCollectionModalVisible:!1,hasCommentChildFocus:!1,isAwaitingBlock:!1,usersWereBlocked:!1,blockDidFail:!1,projectSourceAssets:[]}},actions:(r={},r[v]=function(e,t){var o=e.commit,i=e.rootState,n=e.dispatch,r=e.state,s=t.projectUrl,c=t.projectId;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t,u,d,p,h,m,f,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:o(se,!1),o(ae,!0),c||_.default.info("/v2/projects/undefined/view","indexNeue-INIT"),a.label=1;case 1:return a.trys.push([1,3,,5]),[4,Promise.all([l.Z.getGallery(s),l.Z.getUser(i.config.user&&i.config.user.id),l.Z.markViewed(c)])];case 2:return e=a.sent(),t=e[0],u=t.view,d=t.admin,p=t.title,h=t.styles,m=t.share_config,f=e[1],r.isViewerOpen?(o(te,u),o(he,d),o(ie,p),o(de,u.project.stats.comments),o(ce,h.project),o(se,!0),o(le,h.inline[0]),o(re,u.project.is_appreciated),o(pe,f),o(_e,m),[3,5]):[2];case 3:return v=a.sent(),[4,n("error",v,{root:!0})];case 4:return a.sent(),[3,5];case 5:return[2]}}))}))},r[C]=function(e,t){var o,i=e.commit,n=e.dispatch,r=e.state;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,s,c,l;return(0,a.__generator)(this,(function(u){switch(u.label){case 0:if(!t)return[2];u.label=1;case 1:return u.trys.push([1,4,,6]),[4,m.ZP.getProjectWithAssets(t)];case 2:return(null==(e=u.sent())?void 0:e.project)&&(s=(0,a.__spreadArray)((0,a.__spreadArray)([],null!==(o=e.project.sourceFiles)&&void 0!==o?o:[],!0),e.project.linkedAssets,!0),i(Oe,s)),[4,(0,f.R)(r.otherProjects)];case 3:return c=u.sent(),i(oe,c),[3,6];case 4:return l=u.sent(),i(Oe,[]),i(oe,r.otherProjects.map((function(e){return(0,a.__assign)((0,a.__assign)({},e),{sourceFiles:[],linkedAssets:e.linked_assets||[]})}))),[4,n("error",l,{root:!0})];case 5:return u.sent(),[3,6];case 6:return[2]}}))}))},r[T]=function(e){var t=e.dispatch,o=e.commit,i=e.state;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:e=i.credits.filter((function(e){var t;return e.id!==(null===(t=i.user)||void 0===t?void 0:t.id)})),o(ne,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.Z.removeCredit({projectId:i.project.id,userId:i.user.id})];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),t("error",n,{root:!0}),[3,4];case 4:return[2]}}))}))},r[X]=function(e){var t=e.dispatch,o=e.state;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:o.project.id||_.default.info("/v2/projects/undefined/view","indexNeue-PROJECT_VIEWED_ACTION"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l.Z.markViewed(o.project.id)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),t("error",e,{root:!0}),[3,4];case 4:return[2]}}))}))},r[g]=function(e){(0,e.commit)(ae,!1)},r[E]=function(e){var t=e.state,o=e.commit,i=e.dispatch;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:o(re,!0),o(ue,t.appreciationCount+1),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l.Z.appreciate(t.project.id)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),i("error",e,{root:!0}),[3,4];case 4:return[2]}}))}))},r[S]=function(e){var t=e.state,o=e.commit,i=e.dispatch;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:o(re,!1),o(ue,t.appreciationCount-1),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l.Z.unappreciate(t.project.id)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),i("error",e,{root:!0}),[3,4];case 4:return[2]}}))}))},r[y]=function(e){(0,e.commit)(fe,!0)},r[M]=function(e){(0,e.commit)(fe,!1)},r[k]=function(e){(0,e.commit)(fe,!1)},r[A]=function(e){var t=e.state;(0,e.commit)(de,t.commentCount+1)},r[P]=function(e){var t=e.state;(0,e.commit)(de,t.commentCount-1)},r[j]=function(){},r[Z]=function(){},r[w]=function(e,t){var o=t.from;return l.Z.pulseViewed({from:o})},r[B]=function(e,t){var o=e.dispatch,i=t.moduleId,n=t.reasonId;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.takedownModuleImage(i,n)];case 1:return t.sent(),[3,4];case 2:return e=t.sent(),[4,o("error",e,{root:!0})];case 3:throw t.sent(),e;case 4:return[2]}}))}))},r[F]=function(e,t){var o=e.dispatch,i=t.moduleId;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.restoreModuleImage(i)];case 1:return t.sent(),[3,4];case 2:return e=t.sent(),[4,o("error",e,{root:!0})];case 3:throw t.sent(),e;case 4:return[2]}}))}))},r[x]=function(e,t){var o=e.dispatch,i=t.moduleId;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.removeEuIpFlag(i)];case 1:return t.sent(),[3,4];case 2:return e=t.sent(),[4,o("error",e,{root:!0})];case 3:throw t.sent(),e;case 4:return[2]}}))}))},r[$]=function(e,t){var o=e.dispatch,i=t.moduleId;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.invalidateCdnModuleImage(i)];case 1:return t.sent(),[3,4];case 2:return e=t.sent(),[4,o("error",e,{root:!0})];case 3:throw t.sent(),e;case 4:return[2]}}))}))},r[N]=function(e,t){var o=e.dispatch,i=e.state,n=t.reason,r=t.message;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.reportProject({projectId:i.project.id,reason:n,message:r})];case 1:case 3:return t.sent(),[3,4];case 2:return(e=t.sent()).status===u.HTTP_CODE_FORBIDDEN_ERROR?[2]:[4,o("error",e,{root:!0})];case 4:return[2]}}))}))},r[L]=function(e,t){var o=e.dispatch,i=e.state,n=t.reason,r=t.message;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,l.Z.reportProjectAsset({projectId:i.project.id,reason:n,message:r})];case 1:case 3:return t.sent(),[3,4];case 2:return(e=t.sent()).status===u.HTTP_CODE_FORBIDDEN_ERROR?[2]:[4,o("error",e,{root:!0})];case 4:return[2]}}))}))},r[D]=function(e,t){var o=e.dispatch,i=e.commit,n=t.userIds;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t,r,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:i(Ce,!0),a.label=1;case 1:a.trys.push([1,6,,8]),e=0,t=n,a.label=2;case 2:return e<t.length?(r=t[e],[4,l.Z.blockUser(r)]):[3,5];case 3:a.sent(),a.label=4;case 4:return e++,[3,2];case 5:return i(Ce,!1),i(ge,!0),[3,8];case 6:return s=a.sent(),[4,o("error",s,{root:!0})];case 7:return a.sent(),i(Se,!0),[3,8];case 8:return[2]}}))}))},r[U]=function(e){var t=e.dispatch,o=e.state,i=e.commit;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,l.Z.submitForMatureReview(o.project.id)];case 1:return n.sent(),i(me,!0),[3,4];case 2:return e=n.sent(),[4,t("error",e,{root:!0})];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))},r[z]=function(e){var t=e.commit;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){return t(ve,!0),[2]}))}))},r[Y]=function(e){var t=e.commit;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){return t(ve,!1),[2]}))}))},r[Q]=function(e,t){var o=t.moduleId;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,d.Z.getSimilarImageIdsForImageModule(o)];case 1:return e.sent(),[3,3];case 2:return e.sent(),[2];case 3:return[2]}}))}))},r[ee]=function(e){var t=e.commit,o=e.state;return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,i,n,r;return(0,a.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,l.Z.fetchInnerCircleAssetData(o.project.id)];case 1:return e=s.sent().project,i=e.linkedAssets,n=e.owners[0].hasPremiumAccess,r=h()([],o.project.owners,[{has_premium_access:n}]),t(Ee,{linked_assets:i,owners:r}),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},r),mutations:(s={},s[fe]=function(e,t){e.isCollectionModalVisible=t},s[ae]=function(e,t){e.isViewerOpen=t},s[se]=function(e,t){e.isDoneFetching=t},s[ue]=function(e,t){e.appreciationCount=t},s[te]=function(e,t){e.project=t.project,e.otherProjects=t.otherProjects,e.pulsePoints=t.pulse_points,e.urls=t.URLS,e.appreciationCount=t.project.stats.appreciations,e.credits=t.project.credits,e.isMatureReviewSubmitted=t.project.isMatureReviewSubmitted},s[oe]=function(e,t){e.otherProjects=t},s[Ee]=function(e,t){e.project=h()({},e.project,t)},s[ne]=function(e,t){e.credits=t},s[le]=function(e,t){e.inlineStyle=t},s[ie]=function(e,t){e.title=t},s[ce]=function(e,t){e.isFullPage||(e.popupCssPaths=t)},s[de]=function(e,t){e.commentCount=t},s[re]=function(e,t){e.isAppreciated=t},s[pe]=function(e,t){e.user=t},s[he]=function(e,t){e.admin=t},s[_e]=function(e,t){e.shareConfig=t},s[me]=function(e,t){e.isMatureReviewSubmitted=t},s[ve]=function(e,t){e.hasCommentChildFocus=t},s[Ce]=function(e,t){e.isAwaitingBlock=t},s[ge]=function(e,t){e.usersWereBlocked=t},s[Se]=function(e,t){e.blockDidFail=t},s[Oe]=function(e,t){e.projectSourceAssets=t},s)};const Ae=Ie;var Pe=o(28852),Te=o(2825),je=o(38595),we=o(85984),be=o(58270),Re=o(5339),ye=o(16237),Me=o(16766),ke=o(60958),Ne=o(87018),Le=o(606),De=o(84169),Be=o(99148),Fe=o(82567),xe=o(9270),$e=o(81229),Ue=o(94035),Ve=o(77484),He=o(86481),We=o(50362),Ze=(0,c.createNamespacedHelpers)("project"),qe=Ze.mapState,Ge=Ze.mapActions,Je=750,Ke=(0,i.defineAsyncComponent)((function(){return Promise.all([o.e(57),o.e(9160),o.e(1509)]).then(o.bind(o,81427))}));const ze=i.default.defineComponent({components:{Content:ke.Z,Error:Ne.Z,AdminSidebar:Le.Z,AddToCollectionModal:Ke,ReportModalWithBlockFollowup:De.default,SimplifiedPushToMobilePrompt:Be.Z,Spinner:Fe.Z},storeModules:[{namespace:"project",module:Ae},{namespace:"projectAnalytics",module:Te.Z},{namespace:"onboardingAnalytics",module:je.Z}],fetch:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return this.isFullPage&&this.gates.feature_source_files?[4,this.initSourceAssets(this.$route.params.projectId)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},mounted:function(){var e,t,o,i,n,r,s,c;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return this.isMoodboardOpen&&this.initCollections(),this.isFullPage?[2]:[4,this.init({projectUrl:null===(t=null===(e=this.$permalinks)||void 0===e?void 0:e.route)||void 0===t?void 0:t.fullPath,projectId:null===(n=null===(i=null===(o=this.$permalinks)||void 0===o?void 0:o.route)||void 0===i?void 0:i.params)||void 0===n?void 0:n.projectId})];case 1:return a.sent(),this.gates.feature_source_files?[4,this.initSourceAssets(null===(c=null===(s=null===(r=this.$permalinks)||void 0===r?void 0:r.route)||void 0===s?void 0:s.params)||void 0===c?void 0:c.projectId)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},unmounted:function(){this.destroyBindings()},computed:(0,a.__assign)((0,a.__assign)((0,a.__assign)((0,a.__assign)((0,a.__assign)((0,a.__assign)({},(0,c.mapState)(["config","error","gates"])),(0,c.mapState)({trackingSource:function(e){var t;return null===(t=e.layout)||void 0===t?void 0:t.trackingSource},backgroundPageUrl:function(e){var t;return null===(t=e.layout)||void 0===t?void 0:t.backgroundPageUrl},isFromProfile:function(e){var t;return null===(t=e.layout)||void 0===t?void 0:t.isFromProfile}})),(0,c.mapState)("subscriptionModal",["shouldShowPaymentModal"])),(0,c.mapGetters)("user",["isSocialEmailAdmin"])),qe(["admin","shareConfig","project","credits","inlineStyle","popupCssPaths","otherProjects","pulsePoints","urls","title","appreciationCount","isAppreciated","isFollowing","isFullPage","isDoneFetching","isViewerOpen","commentCount","user","projectOwnerMiniprofile","isIframe","isMatureReviewSubmitted","recentSocialEmail","isCollectionModalVisible","hasCommentChildFocus","isAwaitingBlock","usersWereBlocked","blockDidFail","projectSourceAssets"])),{isNarrowProject:function(){return this.project.canvas_width<Je},canViewProject:function(){return!!this.isFullPage||this.isCSSLoaded&&this.isDoneFetching},isKeyboardEnabled:function(){return this.canViewProject&&!this.isLightboxOpen&&!this.isCommentFocused&&!this.shouldShowPaymentModal},isAdminSidebarEnabled:function(){return this.admin&&this.admin.has_admin_sidebar},headerText:function(){var e,t,o;return(this.isFullPage?Boolean(this.$route.query.action===Pe.aO.REPORT):Boolean((null===(o=null===(t=null===(e=this.$permalinks)||void 0===e?void 0:e.route)||void 0===t?void 0:t.query)||void 0===o?void 0:o.action)===Pe.aO.REPORT))?this.$translate("project_report_modal_header","Report Project"):this.$translate("project_asset_report_modal_header","Report Project Asset")},isMoodboardOpen:function(){var e,t,o;return this.isFullPage?this.$route.query.action===Pe.aO.MOODBOARD:(null===(o=null===(t=null===(e=this.$permalinks)||void 0===e?void 0:e.route)||void 0===t?void 0:t.query)||void 0===o?void 0:o.action)===Pe.aO.MOODBOARD},isHireMeModalInitiallyOpen:function(){var e,t,o;return this.isFullPage?Boolean(this.$route.query.action===Pe.aO.MESSAGE):Boolean((null===(o=null===(t=null===(e=this.$permalinks)||void 0===e?void 0:e.route)||void 0===t?void 0:t.query)||void 0===o?void 0:o.action)===Pe.aO.MESSAGE)},isReportModalVisible:function(){var e,t,o,i,n,r;return this.isFullPage?Boolean(this.$route.query.action===Pe.aO.REPORT)||Boolean(this.$route.query.action===Pe.aO.REPORT_ASSET):Boolean((null===(o=null===(t=null===(e=this.$permalinks)||void 0===e?void 0:e.route)||void 0===t?void 0:t.query)||void 0===o?void 0:o.action)===Pe.aO.REPORT)||Boolean((null===(r=null===(n=null===(i=this.$permalinks)||void 0===i?void 0:i.route)||void 0===n?void 0:n.query)||void 0===r?void 0:r.action)===Pe.aO.REPORT_ASSET)}}),watch:{"$permalinks.route":function(e,t){var o,i,n,r,s,c,l,u;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e?e.params.projectId===t.params.projectId?[2]:(this.collectionAdded=null,[4,this.init({projectUrl:null===(i=null===(o=this.$permalinks)||void 0===o?void 0:o.route)||void 0===i?void 0:i.fullPath,projectId:null===(s=null===(r=null===(n=this.$permalinks)||void 0===n?void 0:n.route)||void 0===r?void 0:r.params)||void 0===s?void 0:s.projectId})]):[2];case 1:return a.sent(),this.lightbox&&(this.lightbox.destroy(),this.isLightboxOpen=!1),this.gates.feature_source_files?[4,this.initSourceAssets(null===(u=null===(l=null===(c=this.$permalinks)||void 0===c?void 0:c.route)||void 0===l?void 0:l.params)||void 0===u?void 0:u.projectId)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},$route:function(e,t){var o,i;return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return(null===(o=this.$permalinks)||void 0===o?void 0:o.isShowing)||e.params.projectId===t.params.projectId?[2]:(this.collectionAdded=null,(null===(i=this.$route.params)||void 0===i?void 0:i.projectId)?[4,this.init({projectUrl:this.$route.fullPath,projectId:this.$route.params.projectId})]:[3,3]);case 1:return n.sent(),this.gates.feature_source_files?[4,this.initSourceAssets(this.$route.params.projectId)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},isMoodboardOpen:function(e){e&&this.initCollections()},popupCssPaths:function(e){return(0,a.__awaiter)(this,void 0,void 0,(function(){var t,o;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.removeInlineStyle(),t=this,[4,xe.Z.loadCss(e,u.ASSETS_URL)];case 1:return t.isCSSLoaded=i.sent(),this.inlineStylesheet=xe.Z.addInlineStyle(document.head,this.inlineStyle),[3,3];case 2:return o=i.sent(),this.$store.dispatch("error",o,{root:!0}),[3,3];case 3:return[2]}}))}))}},data:function(){return{originalHtmlStyle:"",isCSSLoaded:!1,inlineStylesheet:null,commentsBlock:null,appreciateButton:null,lightbox:null,currentProjectId:"",isLightboxOpen:!1,spam:null,miniprofile:null,scrollBarWidth:0,isCommentFocused:!1,$shareDialog:null,signUp:null,scrollTopPosition:0,collectionAdded:null,lightboxActiveSlideIdx:-1,nextProjectRoute:null,prevProjectRoute:null,modalTarget:"project-content-action-modal",lazyLoad:null,grid:null}},methods:(0,a.__assign)((0,a.__assign)((0,a.__assign)((0,a.__assign)({},(0,c.mapActions)("error",{resetErrorMessage:Re.WX})),(0,c.mapActions)("subscriptionModal",{openSubscriptionPaymentModal:be.aO.INTENT_TO_SUBSCRIBE})),Ge({init:v,closeViewer:g,appreciate:E,unappreciate:S,goToPrevProject:O,goToNextProject:I,commentAdded:A,commentRemoved:P,removeCredit:T,pulsePointClicked:j,pulsePointHovered:w,viewedProject:b,report:N,reportAsset:L,blockUsers:D,submitForMatureReview:U,infoBoxShown:V,infoBoxHidden:H,collectionIconClicked:R,closeCollectionModal:M,openCollectionModal:y,collectionModalSuccessMessageRead:k,clickToolsIcon:W,openInAeroClicked:Z,projectEndReached:q,projectModuleViewed:G,toolOpened:J,galleryOpened:K,commentChildGainedFocus:z,commentChildLostFocus:Y,subscribedOwnerHandler:ee,initSourceAssets:C})),{removeInlineStyle:function(){this.inlineStylesheet&&this.inlineStylesheet.remove()},showScrollTopPosition:function(e){this.scrollTopPosition=e},initBindings:function(){this.initFollowing(),this.initLightbox(),this.initSpam(),this.initMature(),this.initComments(),this.initGrid(),this.initLazyLoad(),this.initAdmin(),this.initShareDialog(),this.initSubscriptionData()},initShareDialog:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t,i,n,r=this;return(0,a.__generator)(this,(function(s){switch(s.label){case 0:return(this.$route.query.share||this.$route.query.unverified)&&this.shareConfig&&this.project.is_owner?"public"!==this.project.privacy&&this.shareConfig.is_email_verified?[2]:[4,o.e(9114).then(o.bind(o,14219))]:[2];case 1:return e=s.sent().default,t=this.user&&this.shareConfig.is_email_verified,i=t&&this.project.is_owner,n=this,[4,new Promise((function(t){return e.init((0,a.__assign)((0,a.__assign)({},r.shareConfig),{unverified:!i,ADOBE_VERIFY:r.config.ADOBE_VERIFY,isNewProjectPopup:!0})).then(t)}))];case 2:return n.$shareDialog=s.sent(),[2]}}))}))},destroyShareDialog:function(){this.$shareDialog&&this.$shareDialog.remove()},initLazyLoad:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return(e=document.querySelectorAll(".js-lazy")).length?[4,o.e(950).then(o.bind(o,62347))]:[2];case 1:return t=i.sent().default,this.lazyLoad=t.init(e,{threshold:600,container:this.$refs.root.$el}),[2]}}))}))},initSpam:function(){this.spam=Ue.Z.init(this.$refs.rootParent.querySelector(".js-project-spam"))},initMature:function(){$e.Z.init(this.project.id,"project",this.project)},initComments:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return this.project.allow_comments?[4,Promise.all([o.e(4855),o.e(6754),o.e(6553)]).then(o.bind(o,94476))]:[2];case 1:return e=i.sent().default,this.commentsBlock=e.init(this.$refs.rootParent,this.config),this.commentsBlock.on("added",(function(){return t.commentAdded()})),this.commentsBlock.on("removed",(function(){return t.commentRemoved()})),this.commentsBlock.on("input.focus",(function(){return t.isCommentFocused=!0})),this.commentsBlock.on("input.blur",(function(){return t.isCommentFocused=!1})),this.commentsBlock.on(ye.W.childHasFocus,(function(){return t.commentChildGainedFocus()})),this.commentsBlock.on(ye.W.childLostFocus,(function(){return t.commentChildLostFocus()})),[2]}}))}))},initLightbox:function(){var e=this;this.lightbox=He.Z.init(this.$refs.rootParent,!1),this.lightbox.on("open",(function(){return e.isLightboxOpen=!0})),this.lightbox.on("close",(function(){return e.isLightboxOpen=!1})),this.lightbox.on("shown",(function(t){return e.lightboxActiveSlideIdx=t}))},initLightboxFollow:function(e){return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.$nextTick()];case 1:return t.sent(),Ve.default.init(document.querySelector(e)),[2]}}))}))},initGrid:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return this.project.modules.filter((function(e){return e.is_grid})).length?[4,o.e(7391).then(o.bind(o,49741))]:[2];case 1:return e=t.sent().default,this.grid=e.init({context:this.$refs.rootParent}),[2]}}))}))},initFollowing:function(){Ve.default.init(this.$refs.rootParent)},initAdmin:function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return this.admin?[4,o.e(58).then(o.bind(o,10737))]:[2];case 1:return e=i.sent().default,t=this.$refs.root.$refs.legacyAdminSidebar,this.admin.is_feature_queue_admin?[4,e.init({projectId:this.project.id,context:t,data:this.admin})]:[3,3];case 2:i.sent(),i.label=3;case 3:return this.admin.is_mature_content_admin?[4,o.e(2537).then(o.bind(o,9910))]:[2];case 4:return i.sent(),[4,o.e(2015).then(o.bind(o,9352))];case 5:return i.sent().default.init(t,this.project.id),[2]}}))}))},handleSubscriptionActiveEvent:function(){this.subscribedOwnerHandler(),this.fetchSubscriptionData()},fetchSubscriptionData:function(){return this.$store.dispatch("subscription/"+we.a.FETCH_ACTION,{username:this.project.owners[0].username,entityOwners:this.project.owners})},destroyBindings:function(){this.removeInlineStyle(),this.canViewProject&&(this.project.allow_comments&&this.commentsBlock&&(this.commentsBlock.destroy(),this.commentsBlock=null),this.lightbox.destroy(),Ve.default.destroy(),this.lazyLoad&&this.lazyLoad.destroy(),this.grid&&this.grid.destroy(),$e.Z.destroy(),this.spam.destroy(),this.popupCssPaths&&xe.Z.removeCss(this.popupCssPaths,u.ASSETS_URL),this.destroyShareDialog())},initCollections:function(e){if(!We.default.isLoggedIn())return this.replaceProjectRouteSansAction(),void this.signUpWithCollectionRedirect((0,a.__assign)((0,a.__assign)({},e),{action:Pe.aO.MOODBOARD}));this.openCollectionModal()},replaceProjectRouteSansAction:function(){return this.$router.push({name:Pe.HY,params:{projectId:this.project.id,slug:this.project.slug}})},collectionSuccessMessageReadHandler:function(){this.collectionModalSuccessMessageRead(),this.replaceProjectRouteSansAction()},collectionCloseHandler:function(){this.closeCollectionModal(),this.replaceProjectRouteSansAction()},collectionIconClickHandler:function(e,t){this.collectionIconClicked(e),We.default.isLoggedIn()?this.$router.push({name:Pe.HY,params:{projectId:this.project.id,slug:this.project.slug},query:(0,a.__assign)((0,a.__assign)({},t),{action:Pe.aO.MOODBOARD})}):this.signUpWithCollectionRedirect((0,a.__assign)((0,a.__assign)({},t),{action:Pe.aO.MOODBOARD}))},reportProject:function(e){var t,o,i;(this.isFullPage?Boolean(this.$route.query.action===Pe.aO.REPORT):Boolean((null===(i=null===(o=null===(t=this.$permalinks)||void 0===t?void 0:t.route)||void 0===o?void 0:o.query)||void 0===i?void 0:i.action)===Pe.aO.REPORT))?this.report(e):this.reportAsset(e)},signUpWithCollectionRedirect:function(e){void 0===e&&(e={}),We.default.signUp({redirect_uri:this.config.SSO.URLS.LOGIN+"?destination="+this.$route.path+"?"+(0,Me.parseQueryToString)(e)})},initSubscriptionData:function(){this.$store.dispatch("subscription/"+we.a.FETCH_ACTION,{username:this.project.owners[0].username,entityOwners:this.project.owners})}})});var Ye=o(57525),Xe=o.n(Ye),Qe=o(18705);const et={};et.$style=Xe();const tt=(0,Qe.default)(ze,[["render",function(e,t,o,r,s,a){var c,l=(0,i.resolveComponent)("AdminSidebar"),u=(0,i.resolveComponent)("Content"),d=(0,i.resolveComponent)("Spinner"),p=(0,i.resolveComponent)("Error"),h=(0,i.resolveComponent)("portal"),_=(0,i.resolveComponent)("AddToCollectionModal"),m=(0,i.resolveComponent)("ReportModalWithBlockFollowup"),f=(0,i.resolveComponent)("SimplifiedPushToMobilePrompt"),v=(0,i.resolveComponent)("portal-target");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{ref:"rootParent","data-id":e.project.id,class:(0,i.normalizeClass)((c={},c[e.$style.projectWrapper]=!e.isFullPage,c))},[e.canViewProject?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,ref:"root",credits:e.credits,project:e.project,pulsePoints:e.pulsePoints,appreciationCount:e.appreciationCount,commentCount:e.commentCount,isAppreciated:e.isAppreciated,isFollowing:e.isFollowing,scrollTopPosition:e.scrollTopPosition,urls:e.urls,isFullPage:e.isFullPage,isNarrowProject:e.isNarrowProject,otherProjects:e.otherProjects,user:e.user,displayAdminSidebar:e.isAdminSidebarEnabled,projectOwnerMiniprofile:e.projectOwnerMiniprofile,isMatureReviewSubmitted:e.isMatureReviewSubmitted,collectionAdded:e.collectionAdded,isLightboxOpen:e.isLightboxOpen,lightboxActiveSlideIdx:e.lightboxActiveSlideIdx,hasCommentChildFocus:e.hasCommentChildFocus,isFromProfile:e.isFromProfile,isHireMeModalInitiallyOpen:e.isHireMeModalInitiallyOpen,isUsingLegacyPopupLibrary:!1,sourceAssets:e.projectSourceAssets,onRemoveCredit:e.removeCredit,onMounted:e.initBindings,onPulseViewed:t[0]||(t[0]=function(t){return e.pulsePointHovered({from:t.from,analytics:t})}),onPulseClosed:t[1]||(t[1]=function(t){return e.pulsePointClicked({analytics:t})}),onProjectViewed:t[2]||(t[2]=function(t){return e.viewedProject({analytics:t})}),onUnappreciated:e.unappreciate,onAppreciated:e.appreciate,onSubmitForMatureReview:e.submitForMatureReview,onInfoBoxShown:e.infoBoxShown,onInfoBoxHidden:e.infoBoxHidden,onCollectionIconClicked:e.collectionIconClickHandler,onAdobeToolClicked:t[3]||(t[3]=function(t){return e.clickToolsIcon({analytics:t})}),onOpenInAeroClicked:e.openInAeroClicked,onInitLightboxFollow:e.initLightboxFollow,onProjectEndReached:t[4]||(t[4]=function(t){return e.projectEndReached({analytics:t})}),onProjectModuleViewed:t[5]||(t[5]=function(t){return e.projectModuleViewed({analytics:t})}),onToolOpened:t[6]||(t[6]=function(t){return e.toolOpened({analytics:t})}),onGalleryOpened:t[7]||(t[7]=function(t){return e.galleryOpened({analytics:t})}),onSubscriptionStatusActivated:e.handleSubscriptionActiveEvent},(0,i.createSlots)({_:2},[e.isSocialEmailAdmin?{name:"adminSidebar",fn:(0,i.withCtx)((function(){return[(0,i.createVNode)(l,{projectId:e.project.id,recentSocialEmail:e.recentSocialEmail},null,8,["projectId","recentSocialEmail"])]}))}:void 0]),1032,["credits","project","pulsePoints","appreciationCount","commentCount","isAppreciated","isFollowing","scrollTopPosition","urls","isFullPage","isNarrowProject","otherProjects","user","displayAdminSidebar","projectOwnerMiniprofile","isMatureReviewSubmitted","collectionAdded","isLightboxOpen","lightboxActiveSlideIdx","hasCommentChildFocus","isFromProfile","isHireMeModalInitiallyOpen","sourceAssets","onRemoveCredit","onMounted","onUnappreciated","onAppreciated","onSubmitForMatureReview","onInfoBoxShown","onInfoBoxHidden","onCollectionIconClicked","onOpenInAeroClicked","onInitLightboxFollow","onSubscriptionStatusActivated"])):((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,ref:"spinner",class:(0,i.normalizeClass)(e.$style.centerSpinner)},null,8,["class"])),(0,i.createVNode)(h,{name:"ProjectErrorPortal",to:"js-vue-error-portal"},{default:(0,i.withCtx)((function(){return[e.error?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,message:e.error.message,onCloseError:e.resetErrorMessage},null,8,["message","onCloseError"])):(0,i.createCommentVNode)("",!0)]}),void 0,!0),_:1}),(0,i.createVNode)(h,{to:"js-vue-project-moodboard-modal"},{default:(0,i.withCtx)((function(){return[e.isCollectionModalVisible&&e.user?((0,i.openBlock)(),(0,i.createBlock)(_,{key:0,namespace:"project",class:"qa-project-collection-modal",modalTitle:e.$translate("project_add_to_moodboard","Add to Moodboard"),projectId:e.project.id,moduleId:Number(e.$route.query.moduleId),gridItemId:Number(e.$route.query.gridItemId),showMobileSubHeader:!0,onAddedToNewCollection:t[8]||(t[8]=function(t){return e.collectionAdded=t}),onSaveCollectionSuccesMessageRead:e.collectionSuccessMessageReadHandler,onCloseAddCollectionModal:e.collectionCloseHandler},null,8,["modalTitle","projectId","moduleId","gridItemId","onSaveCollectionSuccesMessageRead","onCloseAddCollectionModal"])):(0,i.createCommentVNode)("",!0)]}),void 0,!0),_:1}),e.isReportModalVisible&&!e.blockDidFail?((0,i.openBlock)(),(0,i.createBlock)(m,{key:2,ref:"reportModalWithBlockFollowup",userDisplayNames:e.project.owners.map((function(e){return e.display_name})),headerText:e.headerText,backToPageText:e.$translate("report_block_user_back_to_project_page","Back to Project"),usersWereBlocked:e.usersWereBlocked,isAwaitingBlock:e.isAwaitingBlock,onCancel:e.replaceProjectRouteSansAction,onReport:e.reportProject,onBlockUsers:t[9]||(t[9]=function(t){return e.blockUsers({userIds:e.project.owners.map((function(e){return e.id}))})})},null,8,["userDisplayNames","headerText","backToPageText","usersWereBlocked","isAwaitingBlock","onCancel","onReport"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(f),(0,i.createVNode)(h,{to:"js-vue-project-message-modal"},{default:(0,i.withCtx)((function(){return[(0,i.createVNode)(v,{name:e.modalTarget,multiple:""},null,8,["name"])]}),void 0,!0),_:1})],10,n)}],["__cssModules",et],["__moduleIdentifier","0bb07c57"]]),ot=tt},57525:(e,t,o)=>{var i=o(91358);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,o(55087).default)("300ee7c0",i,!0,{})}}]);
//# sourceMappingURL=ProjectNeue.vue.08af77ebe98fe95cc4e3.js.map